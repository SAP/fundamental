{% from "../button/component.njk" import button %}
{% from "../icon/component.njk" import icon %}
{% from "../dropdown/component.njk" import dropdown %}
{% from "../form/component.njk" import form_control %}
{% from "../mega-menu/component.njk" import mega_menu %}
{% from "../identifier/component.njk" import identifier %}
{% import "./../utils.njk" as utils %}

<!--
global_nav:
    properties={},
    modifier={ block: [] },
    state={},
    aria={}
-->

{% macro global_nav(properties={}, modifier={}, state={}, aria={}) -%}
{%- set _id = utils.id() %}
<nav class="fd-global-nav{{ modifier.block | modifier('global-nav') }}{{ state | state }}"{{ aria | aria }}>

    <div class="fd-global-nav__group fd-global-nav__group--left">
        {%- if properties.side_menu -%}
        <div class="fd-global-nav__side-menu">
            {{  button(
                    { icon: 'menu2' },
                    modifier={ block: ['secondary', 'l'] },
                    aria={ label: 'BUTTON_LABEL' },
                    classes='global-nav__btn'
                )
            }}
        </div>
        <div class="fd-global-nav__logo fd-has-margin-left-none"></div>
        {%- else -%}
        <div class="fd-global-nav__logo"></div>
        {%- endif -%}

        <div class="fd-global-nav__product-name">
            Product Name
        </div>
    </div>

	<div class="fd-global-nav__group fd-global-nav__launchpad">

        {{  button(
            { label: 'Suite Name' },
            modifier={ block: ['secondary', 'l'] },
            aria={ label: 'BUTTON_LABEL', haspopup: true , controls: 'launchpad' }
        )}}

        {{ mega_menu(
            properties.launchpad_menu,
            aria={ hidden:true },
            classes="fd-global-nav__launchpad"
        )}}

	</div>

    <div class="fd-global-nav__group fd-global-nav__group--right">

        {%- if properties.context_menu -%}
        <div class="fd-global-nav__context-menu">
            {{ dropdown(properties.context_menu, modifier={ control: "no-border" }) | indent(12) }}
        </div>
        {%- endif -%}

        <div class="fd-global-nav__actions">
            <div class="fd-global-nav__search">

                {{  button(
                        { icon: 'search' },
                        modifier={ block: ['secondary', 'm'] },
                        aria={ label: 'BUTTON_LABEL', controls: _id, haspopup: true, expanded: false },
                        classes='global-nav__btn'
                    )
                }}

                {{ form_control(
                        type='text',
                        id=_id,
                        properties={ placeholder: "Search... " },
                        aria={ hidden: true }
                ) }}

            </div>

            {{  button(
                    { icon: 'action-settings' },
                    modifier={ block: ['secondary', 'm'] },
                    aria={ label: 'BUTTON_LABEL' },
                    classes='global-nav__btn'
                )
            }}
            {{  identifier(
                properties={
                  initials: "WW"
                },
                modifier={
                    block: ['s']
                },
                aria=data.aria,
                classes=['has-margin-right-xs']
            )
            }}        </div>
    </div>
</nav>


{%- endmacro %}
